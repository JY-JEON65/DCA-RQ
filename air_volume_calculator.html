<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DCA 저장고 공기주머니 체적 및 압력 변화 계산기</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #111827;
            color: #E5E7EB;
        }
        .container {
            max-width: 1200px;
            margin: auto;
        }
        .card {
            background-color: #1f2937;
            padding: 1rem; /* 간격 축소 */
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .input-style {
            background-color: #374151;
            border: 1px solid #4B5563;
            color: #E5E7EB;
            padding: 0.5rem; /* 간격 축소 */
            border-radius: 0.5rem;
            transition: all 0.3s ease;
        }
        .input-style:focus {
            border-color: #3B82F6;
            outline: none;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);
        }
        .btn-primary {
            background-color: #3B82F6;
            color: white;
            padding: 0.5rem 0.75rem; /* 간격 축소 */
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        .btn-primary:hover {
            background-color: #2563EB;
        }
        .btn-secondary {
            background-color: #6B7280;
            color: white;
            padding: 0.5rem 0.75rem; /* 간격 축소 */
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        .btn-secondary:hover {
            background-color: #4B5563;
        }
        .gradient-bg {
            background: #111827;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem; /* 간격 축소 */
        }
        @media (max-width: 768px) {
            .calculator-grid {
                grid-template-columns: 1fr;
            }
        }
        .formula-section {
            background: #1f2937;
            border-radius: 20px;
            padding: 1.5rem; /* 간격 축소 */
            color: white;
            margin-top: 1.5rem; /* 간격 축소 */
        }
        .result-box {
            background-color: #1e293b;
            color: #E5E7EB;
            border-radius: 0.5rem;
            padding: 0.75rem; /* 간격 축소 */
        }
        .result-box h4 {
            color: #D1D5DB;
            font-size: 0.95rem; /* 폰트 크기 축소 */
            margin-bottom: 0.5rem; /* 간격 축소 */
        }
        .result-highlight {
            color: #3B82F6;
            font-weight: bold;
        }
        /* 폰트 사이즈 조정 */
        .text-4xl { font-size: 2.25rem; }
        .text-lg { font-size: 1rem; }
        .text-2xl { font-size: 1.5rem; }
    </style>
</head>
<body class="min-h-screen gradient-bg relative overflow-x-hidden">
    <a href="index.html" style="position: absolute; top: 1rem; right: 1rem; z-index: 20;">
        <img src="home.png" alt="Home" style="width: 40px; height: 40px;">
    </a>
    <div class="container mx-auto px-4 py-4 relative z-10">
        <div class="text-center mb-4">
            <h1 class="text-4xl font-bold text-gray-100 mb-1">DCA 저장고 공기주머니 계산기</h1>
            <p class="text-lg text-gray-400 max-w-2xl mx-auto">
                창고 가로, 세로, 높이 및 온도 변화를 입력하여<br>
                필요한 공기주머니 체적과 압력 변화를 계산합니다.
            </p>
        </div>

        <div class="card mb-4">
            <h2 class="text-2xl font-bold text-gray-100 mb-2 flex items-center">
                <svg class="w-5 h-5 mr-1.5 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a2 2 0 104 0 2 2 0 00-4 0zm8 0a2 2 0 104 0 2 2 0 00-4 0z"/>
                </svg>
                공통 저장고 정보
            </h2>
            <div id="commonError" style="display: none;" class="bg-red-900 text-red-300 p-2 rounded-lg mb-2"></div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label class="block text-sm font-semibold text-gray-400 mb-1">가로 (m)</label>
                    <input type="number" id="width" step="0.01" min="0" class="w-full input-style" placeholder="예: 10">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-400 mb-1">세로 (m)</label>
                    <input type="number" id="length" step="0.01" min="0" class="w-full input-style" placeholder="예: 15">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-400 mb-1">높이 (m)</label>
                    <input type="number" id="height" step="0.01" min="0" class="w-full input-style" placeholder="예: 8">
                </div>
            </div>
            <div class="mt-4 text-right">
                <button onclick="resetAllFields()" class="btn-secondary">
                    모든 필드 초기화
                </button>
            </div>
        </div>

        <div class="calculator-grid">
            <div class="card">
                <h2 class="text-2xl font-bold text-gray-100 mb-2 flex items-center">
                    <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                    내부형 계산기
                    <span class="text-sm font-normal text-gray-400 ml-1">(창고 내부 설치)</span>
                </h2>
                <div id="innerError" style="display: none;" class="bg-red-900 text-red-300 p-2 rounded-lg mb-2"></div>
                <div id="innerSuccess" style="display: none;" class="bg-green-900 text-green-300 p-2 rounded-lg mb-2"></div>
                <div class="space-y-2 mb-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-400 mb-1">초기 저장고 온도 (K)</label>
                        <input type="number" id="innerInitialTemp" value="273" step="0.01" min="0" class="w-full input-style">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-400 mb-1">고내 (내부 최대 온도 변화값) (K)</label>
                        <input type="number" id="innerTempChange" value="10" step="0.01" class="w-full input-style">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-400 mb-1">최종 저장고 온도 (K)</label>
                        <input type="number" id="innerFinalTemp" readonly class="w-full input-style bg-gray-700 text-gray-400">
                    </div>
                </div>
                <div class="flex space-x-2 mb-4">
                    <button onclick="calculateInner()" class="flex-1 btn-primary bg-green-600 hover:bg-green-700">
                        계산하기
                    </button>
                    <button onclick="resetInnerFields()" class="flex-1 btn-secondary bg-yellow-600 hover:bg-yellow-700">
                        초기화
                    </button>
                </div>
                <div class="space-y-2">
                    <div class="result-box">
                        <h4 class="font-semibold text-gray-300 mb-1">체적 변화 결과</h4>
                        <div class="space-y-1 text-xs">
                            <div class="flex justify-between">
                                <span>창고 전체 체적 (V₀):</span>
                                <span id="innerV0Result" class="font-semibold">---</span>
                            </div>
                            <div class="flex justify-between">
                                <span>온도 변화 (ΔT):</span>
                                <span id="innerDeltaTResult" class="font-semibold">---</span>
                            </div>
                            <div class="flex justify-between">
                                <span>최종 체적 (V₁):</span>
                                <span id="innerV1Result" class="font-semibold">---</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-blue-400 font-bold">필요 공기주머니 체적 (ΔV):</span>
                                <span id="innerDeltaVResult" class="font-bold text-blue-400 result-highlight">---</span>
                            </div>
                        </div>
                    </div>
                    <div class="result-box">
                        <h4 class="font-semibold text-gray-300 mb-1">압력 변화 결과</h4>
                        <div class="space-y-1 text-xs">
                            <div class="flex justify-between">
                                <span>초기 압력 (P₀):</span>
                                <span id="innerP0Result" class="font-semibold">---</span>
                            </div>
                            <div class="flex justify-between">
                                <span>최종 압력 (P₁):</span>
                                <span id="innerP1Result" class="font-semibold">---</span>
                            </div>
                            <div class="flex justify-between">
                                <span>압력 변화 (ΔP atm):</span>
                                <span id="innerDPResult" class="font-semibold">---</span>
                            </div>
                            <div class="flex justify-between">
                                <span>ΔP (kPa):</span>
                                <span id="innerDPkPaResult" class="font-semibold">---</span>
                            </div>
                            <div class="flex justify-between">
                                <span>ΔP (mmAq):</span>
                                <span id="innerDPmmAqResult" class="font-semibold">---</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-blue-400 font-bold">ΔP (kgf/m²):</span>
                                <span id="innerDPkgfResult" class="font-bold text-blue-400 result-highlight">---</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 class="text-2xl font-bold text-gray-100 mb-2 flex items-center">
                    <div class="w-3 h-3 bg-purple-500 rounded-full mr-2"></div>
                    외부형 계산기
                    <span class="text-sm font-normal text-gray-400 ml-1">(창고 외부 설치)</span>
                </h2>
                <div id="outerError" style="display: none;" class="bg-red-900 text-red-300 p-2 rounded-lg mb-2"></div>
                <div id="outerSuccess" style="display: none;" class="bg-green-900 text-green-300 p-2 rounded-lg mb-2"></div>
                <div class="space-y-2 mb-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-400 mb-1">초기 저장고 온도 (K)</label>
                        <input type="number" id="outerInitialTemp" value="273" step="0.01" min="0" class="w-full input-style">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-400 mb-1">고내 (내부 최대 온도 변화값) (K)</label>
                        <input type="number" id="outerInnerTempChange" value="15" step="0.01" class="w-full input-style">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-400 mb-1">고내.외기 (내부와 외부의 최대 온도차) (K)</label>
                        <input type="number" id="outerInnerOuterTempDiff" value="25" step="0.01" class="w-full input-style">
                    </div>
                </div>
                <div class="flex space-x-2 mb-4">
                    <button onclick="calculateOuter()" class="flex-1 btn-primary bg-purple-600 hover:bg-purple-700">
                        계산하기
                    </button>
                    <button onclick="resetOuterFields()" class="flex-1 btn-secondary bg-yellow-600 hover:bg-yellow-700">
                        초기화
                    </button>
                </div>
                <div class="space-y-2">
                    <div class="result-box">
                        <h4 class="font-semibold text-gray-300 mb-1">[고내값 적용 시] 결과</h4>
                        <div class="mb-2">
                            <div class="flex justify-between text-xs">
                                <span>최종 저장고 온도:</span>
                                <span id="outerFinalTempInnerOnly" class="font-semibold text-green-400">---</span>
                            </div>
                        </div>
                        <div class="space-y-1 text-xs">
                            <div class="flex justify-between">
                                <span>창고 전체 체적 (V₀):</span>
                                <span id="outerV0InnerOnlyResult" class="font-semibold">---</span>
                            </div>
                            <div class="flex justify-between">
                                <span>온도 변화 (ΔT):</span>
                                <span id="outerDeltaTInnerOnlyResult" class="font-semibold">---</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-green-400 font-bold">필요 공기주머니 체적 (ΔV):</span>
                                <span id="outerDeltaVInnerOnlyResult" class="font-bold text-green-400">---</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-green-400 font-bold">ΔP (kgf/m²):</span>
                                <span id="outerDPkgfInnerOnlyResult" class="font-bold text-green-400">---</span>
                            </div>
                        </div>
                    </div>
                    <div class="result-box">
                        <h4 class="font-semibold text-gray-300 mb-1">[고내.외기값 적용 시] 결과</h4>
                        <div class="mb-2">
                            <div class="flex justify-between text-xs">
                                <span>최종 저장고 온도:</span>
                                <span id="outerFinalTempInnerOuter" class="font-semibold text-orange-400">---</span>
                            </div>
                        </div>
                        <div class="space-y-1 text-xs">
                            <div class="flex justify-between">
                                <span>창고 전체 체적 (V₀):</span>
                                <span id="outerV0InnerOuterResult" class="font-semibold">---</span>
                            </div>
                            <div class="flex justify-between">
                                <span>온도 변화 (ΔT):</span>
                                <span id="outerDeltaTInnerOuterResult" class="font-semibold">---</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-orange-400 font-bold">필요 공기주머니 체적 (ΔV):</span>
                                <span id="outerDeltaVInnerOuterResult" class="font-bold text-orange-400 result-highlight">---</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-orange-400 font-bold">ΔP (kgf/m²):</span>
                                <span id="outerDPkgfInnerOuterResult" class="font-bold text-orange-400 result-highlight">---</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="formula-section glass-effect">
            <h2 class="text-2xl font-bold mb-2 flex items-center text-gray-100">
                <svg class="w-5 h-5 mr-2 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                    <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z"/>
                </svg>
                계산 공식 및 참고
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-gray-700 bg-opacity-50 rounded-lg p-3">
                    <h3 class="font-semibold mb-2 text-gray-300">체적 변화 공식 (이상기체 법칙)</h3>
                    <div class="space-y-1 text-xs">
                        <p><strong>P₀V₀/T₀ = P₁V₁/T₁</strong> (압력 일정시)</p>
                        <p>V₁ = V₀ × (T₁/T₀)</p>
                        <p><strong>ΔV = V₀ × (ΔT/T₀)</strong></p>
                        <p class="text-blue-400">* V₀: 창고 전체 체적 (m³)</p>
                        <p class="text-blue-400">* ΔT: 온도 변화 (K)</p>
                        <p class="text-blue-400">* T₀: 초기 온도 (K)</p>
                    </div>
                </div>
                <div class="bg-gray-700 bg-opacity-50 rounded-lg p-3">
                    <h3 class="font-semibold mb-2 text-gray-300">압력 변화 공식 (체적 일정시)</h3>
                    <div class="space-y-1 text-xs">
                        <p>P₁ = P₀ × (T₁/T₀)</p>
                        <p><strong>ΔP = P₀ × (ΔT/T₀)</strong></p>
                        <p class="text-blue-400">* P₀ = 1 atm (기준 압력)</p>
                        <p class="text-blue-400">* 1 atm = 101.325 kPa</p>
                        <p class="text-blue-400">* 1 atm = 10332.27 mmAq</p>
                        <p class="text-blue-400">* 1 mmAq ≈ 1 kgf/m²</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 상수 정의 (파이썬 코드 기반)
        const ATM_TO_KPA = 101.325;
        const ATM_TO_MMAQ = 10332.27;
        const MMAQ_TO_KGF_PER_SQM = 1.0;

        // 입력값 실시간 업데이트 이벤트 리스너
        document.getElementById('innerInitialTemp').addEventListener('input', updateInnerFinalTemp);
        document.getElementById('innerTempChange').addEventListener('input', updateInnerFinalTemp);
        document.getElementById('outerInitialTemp').addEventListener('input', updateOuterFinalTemp);
        document.getElementById('outerInnerTempChange').addEventListener('input', updateOuterFinalTemp);
        document.getElementById('outerInnerOuterTempDiff').addEventListener('input', updateOuterFinalTemp);

        // 내부형 최종 온도 자동 업데이트
        function updateInnerFinalTemp() {
            try {
                const initialTemp = parseFloat(document.getElementById('innerInitialTemp').value) || 0;
                const tempChange = parseFloat(document.getElementById('innerTempChange').value) || 0;
                const finalTemp = initialTemp + tempChange;
                document.getElementById('innerFinalTemp').value = finalTemp.toFixed(2);
            } catch (error) {
                document.getElementById('innerFinalTemp').value = '---';
            }
        }

        // 외부형 최종 온도 자동 업데이트
        function updateOuterFinalTemp() {
            try {
                const initialTemp = parseFloat(document.getElementById('outerInitialTemp').value) || 0;
                const innerTempChange = parseFloat(document.getElementById('outerInnerTempChange').value) || 0;
                const innerOuterTempDiff = parseFloat(document.getElementById('outerInnerOuterTempDiff').value) || 0;
                
                const finalTempInnerOnly = initialTemp + innerTempChange;
                const finalTempInnerOuter = initialTemp + innerOuterTempDiff;
                
                document.getElementById('outerFinalTempInnerOnly').textContent = finalTempInnerOnly.toFixed(2) + ' K';
                document.getElementById('outerFinalTempInnerOuter').textContent = finalTempInnerOuter.toFixed(2) + ' K';
            } catch (error) {
                document.getElementById('outerFinalTempInnerOnly').textContent = '---';
                document.getElementById('outerFinalTempInnerOuter').textContent = '---';
            }
        }

        // 공통 입력값 검증
        function validateCommonInputs() {
            const width = parseFloat(document.getElementById('width').value);
            const length = parseFloat(document.getElementById('length').value);
            const height = parseFloat(document.getElementById('height').value);

            if (!width || !length || !height) {
                return { valid: false, message: '가로, 세로, 높이를 모두 입력해주세요.' };
            }

            if (width <= 0 || length <= 0 || height <= 0) {
                return { valid: false, message: '가로, 세로, 높이는 0보다 큰 숫자여야 합니다.' };
            }

            return { valid: true, width, length, height };
        }

        // 공통 계산 메트릭 함수 (파이썬 코드 기반)
        function calculateCommonMetrics(width, length, height, initialTemp, finalTemp) {
            if (initialTemp <= 0) {
                throw new Error('초기 온도는 0K보다 커야 합니다.');
            }

            const v0 = width * length * height;
            const deltaT = finalTemp - initialTemp;
            const requiredAirbagVolume = v0 * (Math.abs(deltaT) / initialTemp);
            const v1 = v0 * (finalTemp / initialTemp);

            const initialPressureAtm = 1.0;
            const deltaPAtm = initialPressureAtm * (Math.abs(deltaT) / initialTemp);
            const p1 = initialPressureAtm * (finalTemp / initialTemp);

            const deltaPKpa = deltaPAtm * ATM_TO_KPA;
            const deltaPMmaq = deltaPAtm * ATM_TO_MMAQ;
            const deltaPKgfPerSqm = deltaPMmaq * MMAQ_TO_KGF_PER_SQM;

            return {
                v0: v0,
                deltaT: deltaT,
                requiredAirbagVolume: requiredAirbagVolume,
                initialPressureAtm: initialPressureAtm,
                deltaPAtm: deltaPAtm,
                deltaPKpa: deltaPKpa,
                deltaPMmaq: deltaPMmaq,
                deltaPKgfPerSqm: deltaPKgfPerSqm,
                v1: v1,
                p1: p1
            };
        }

        // 에러/성공 메시지 표시 함수
        function showMessage(elementId, message, isError = true) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.style.display = 'block';
            
            setTimeout(() => {
                element.style.display = 'none';
            }, 5000);
        }

        // 결과 초기화 함수
        function resetResults(prefix) {
            const resultIds = [
                `${prefix}V0Result`, `${prefix}DeltaTResult`, `${prefix}DeltaVResult`, `${prefix}V1Result`,
                `${prefix}P0Result`, `${prefix}P1Result`, `${prefix}DPResult`, 
                `${prefix}DPkPaResult`, `${prefix}DPmmAqResult`, `${prefix}DPkgfResult`
            ];
            
            resultIds.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.textContent = '---';
            });
        }

        // 내부형 계산기 함수
        function calculateInner() {
            try {
                const commonValidation = validateCommonInputs();
                if (!commonValidation.valid) {
                    showMessage('innerError', commonValidation.message, true);
                    return;
                }

                const initialTemp = parseFloat(document.getElementById('innerInitialTemp').value);
                const finalTemp = parseFloat(document.getElementById('innerFinalTemp').value);

                if (!initialTemp || !finalTemp) {
                    showMessage('innerError', '온도 값을 모두 입력해주세요.', true);
                    return;
                }

                const results = calculateCommonMetrics(
                    commonValidation.width, 
                    commonValidation.length, 
                    commonValidation.height, 
                    initialTemp, 
                    finalTemp
                );

                document.getElementById('innerV0Result').textContent = results.v0.toFixed(2) + ' m³';
                document.getElementById('innerDeltaTResult').textContent = results.deltaT.toFixed(2) + ' K';
                document.getElementById('innerV1Result').textContent = results.v1.toFixed(2) + ' m³';
                document.getElementById('innerDeltaVResult').textContent = results.requiredAirbagVolume.toFixed(2) + ' m³ (내부형)';
                
                document.getElementById('innerP0Result').textContent = results.initialPressureAtm.toFixed(3) + ' atm';
                document.getElementById('innerP1Result').textContent = results.p1.toFixed(4) + ' atm';
                document.getElementById('innerDPResult').textContent = results.deltaPAtm.toFixed(4) + ' atm';
                document.getElementById('innerDPkPaResult').textContent = results.deltaPKpa.toFixed(2) + ' kPa';
                document.getElementById('innerDPmmAqResult').textContent = results.deltaPMmaq.toFixed(2) + ' mmAq';
                document.getElementById('innerDPkgfResult').textContent = results.deltaPKgfPerSqm.toFixed(2) + ' kgf/m²';

                showMessage('innerSuccess', '내부형 계산이 완료되었습니다.', false);
                document.getElementById('innerError').style.display = 'none';

            } catch (error) {
                showMessage('innerError', '계산 중 오류가 발생했습니다: ' + error.message, true);
                resetResults('inner');
            }
        }

        // 외부형 계산기 함수
        function calculateOuter() {
            try {
                const commonValidation = validateCommonInputs();
                if (!commonValidation.valid) {
                    showMessage('outerError', commonValidation.message, true);
                    return;
                }

                const initialTemp = parseFloat(document.getElementById('outerInitialTemp').value);
                const innerTempChange = parseFloat(document.getElementById('outerInnerTempChange').value);
                const innerOuterTempDiff = parseFloat(document.getElementById('outerInnerOuterTempDiff').value);

                if (!initialTemp || innerTempChange === undefined || innerOuterTempDiff === undefined) {
                    showMessage('outerError', '온도 값을 모두 입력해주세요.', true);
                    return;
                }

                // --- 시나리오 1: 고내값만 적용하여 계산 ---
                const finalTempInnerOnly = initialTemp + innerTempChange;
                const resultsInnerOnly = calculateCommonMetrics(
                    commonValidation.width, 
                    commonValidation.length, 
                    commonValidation.height, 
                    initialTemp, 
                    finalTempInnerOnly
                );

                document.getElementById('outerV0InnerOnlyResult').textContent = resultsInnerOnly.v0.toFixed(2) + ' m³';
                document.getElementById('outerDeltaTInnerOnlyResult').textContent = resultsInnerOnly.deltaT.toFixed(2) + ' K';
                document.getElementById('outerDeltaVInnerOnlyResult').textContent = resultsInnerOnly.requiredAirbagVolume.toFixed(2) + ' m³ (고내)';
                document.getElementById('outerDPkgfInnerOnlyResult').textContent = resultsInnerOnly.deltaPKgfPerSqm.toFixed(2) + ' kgf/m²';

                // --- 시나리오 2: 고내.외기값만 적용하여 계산 ---
                const finalTempInnerOuter = initialTemp + innerOuterTempDiff;
                const resultsInnerOuter = calculateCommonMetrics(
                    commonValidation.width, 
                    commonValidation.length, 
                    commonValidation.height, 
                    initialTemp, 
                    finalTempInnerOuter
                );

                document.getElementById('outerV0InnerOuterResult').textContent = resultsInnerOuter.v0.toFixed(2) + ' m³';
                document.getElementById('outerDeltaTInnerOuterResult').textContent = resultsInnerOuter.deltaT.toFixed(2) + ' K';
                document.getElementById('outerDeltaVInnerOuterResult').textContent = resultsInnerOuter.requiredAirbagVolume.toFixed(2) + ' m³ (고내.외기)';
                document.getElementById('outerDPkgfInnerOuterResult').textContent = resultsInnerOuter.deltaPKgfPerSqm.toFixed(2) + ' kgf/m²';

                showMessage('outerSuccess', '외부형 계산이 완료되었습니다.', false);
                document.getElementById('outerError').style.display = 'none';

            } catch (error) {
                showMessage('outerError', '계산 중 오류가 발생했습니다: ' + error.message, true);
                
                const outerResultIds = [
                    'outerV0InnerOnlyResult', 'outerDeltaTInnerOnlyResult', 'outerDeltaVInnerOnlyResult', 'outerDPkgfInnerOnlyResult',
                    'outerV0InnerOuterResult', 'outerDeltaTInnerOuterResult', 'outerDeltaVInnerOuterResult', 'outerDPkgfInnerOuterResult'
                ];
                
                outerResultIds.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) element.textContent = '---';
                });
            }
        }

        function resetInnerFields() {
            document.getElementById('innerInitialTemp').value = '273';
            document.getElementById('innerTempChange').value = '10';
            updateInnerFinalTemp();
            resetResults('inner');
            document.getElementById('innerError').style.display = 'none';
            document.getElementById('innerSuccess').style.display = 'none';
        }

        function resetOuterFields() {
            document.getElementById('outerInitialTemp').value = '273';
            document.getElementById('outerInnerTempChange').value = '15';
            document.getElementById('outerInnerOuterTempDiff').value = '25';
            updateOuterFinalTemp();
            const outerResultIds = [
                'outerV0InnerOnlyResult', 'outerDeltaTInnerOnlyResult', 'outerDeltaVInnerOnlyResult', 'outerDPkgfInnerOnlyResult',
                'outerV0InnerOuterResult', 'outerDeltaTInnerOuterResult', 'outerDeltaVInnerOuterResult', 'outerDPkgfInnerOuterResult'
            ];
            outerResultIds.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.textContent = '---';
            });
            document.getElementById('outerError').style.display = 'none';
            document.getElementById('outerSuccess').style.display = 'none';
        }

        function resetAllFields() {
            document.getElementById('width').value = '';
            document.getElementById('length').value = '';
            document.getElementById('height').value = '';
            resetInnerFields();
            resetOuterFields();
            document.getElementById('commonError').style.display = 'none';
        }

        document.addEventListener('DOMContentLoaded', function() {
            updateInnerFinalTemp();
            updateOuterFinalTemp();
        });
    </script>
</body>
</html>